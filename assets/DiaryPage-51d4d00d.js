import{s as i,e as S,u as k,r as g,Q as A,y as R,j as e,F as N,h as m,a as f,A as W,o as E,E as z,L as T}from"./index-ea397ace.js";import{b as P,l as $,a as G,c as D,M as Q,d as V,e as _}from"./formikDiary-a839a15f.js";const q=i.section`
  padding: 16px 10px 40px;

  @media (min-width: 768px) {
    padding: 24px 27px 40px;
  }
`,H=i.div`
  display: flex;
  align-items: flex-end;
  gap: 4px;
  margin-bottom: 16px;
`,J=i.span`
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 0;
`;i.svg`
  width: 16px;
  height: 16px;

  @media (min-width: 768px) {
    width: 24px;
    height: 24px;
  }
`;const K=i.h1`
  color: #fff;
  font-size: 24px;
  font-weight: 500;

  @media (min-width: 768px) {
    font-size: 30px;
  }
`,O=i.ul`
  @media (min-width: 1200px) {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
  }
`,U=i.li`
  @media (min-width: 1200px) {
    width: calc((100% - 1 * 20px) / 2);
    margin-bottom: 0;
  }
`,v=i.img`
  width: 32px;
  height: 32px;
`,M=i.div`
  display: flex;
  align-items: center;
  gap: 12px;
`,X=i.div`
  @media (min-width: 768px) {
    display: flex;
    justify-content: space-between;
  }
`,F=i.h2`
  font-size: 18px;
  font-weight: 400;

  @media (min-width: 768px) {
    font-size: 22px;
  }
`,Y=i.ul`
  display: flex;
  gap: 20px;
  margin: 12px 0;
  @media (min-width: 768px) {
    margin-right: 74px;
  }
  @media (min-width: 1200px) {
    margin-right: 40px;
  }
`;i.li``;const Z=i.div``,ee=i.ul`
  background-color: var(--black-secondary);
  border-radius: 12px;
  padding: 16px 12px;
  margin-bottom: 24px;

  @media (min-width: 1200px) {
    margin-bottom: 0;
  }
`,ie=i.li`
  display: flex;

  &:not(:last-child) {
    margin-bottom: 30px;
  }
`,ne=i.button`
  display: flex;
  align-items: center;
  margin-left: 16px;
`;i.svg`
  margin-right: 6px;
`;const re=i.span`
  color: var(--green-light);
  cursor: pointer;
`,te=i.svg`
  width: 16px;
  height: 16px;
  stroke: var(--grey-light);

  @media (min-width: 768px) {
    width: 22px;
    height: 22px;
  }
`,ae=i.svg`
  width: 16px;
  height: 16px;
  stroke: var(--green-light);
`,se=i.div`
  width: 300px;
  height: 546px;
  background-color: var(--black-secondar);
  padding: 16px 12px;

  @media (min-width: 768px) {
    width: 708px;
    height: 408px;
    padding: 24px;
  }
`,oe=i.h3`
  font-size: 24px;
  font-weight: 500;
  margin-bottom: 24px;
`,de=i(S)``,ce=i.div`
  margin-top: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;

  @media (min-width: 768px) {
    display: flex;
    flex-direction: row;
    gap: 16px;
  }
`,le=i.div`
  display: flex;
  gap: 16px;
`,u=i.div`
  display: flex;
  flex-direction: column;
`,pe=i(u)`
  @media (min-width: 768px) {
    width: 250px;
  }
`,xe=i(u)`
  @media (min-width: 768px) {
    width: 100px;
  }
`,he=i(u)`
  @media (min-width: 768px) {
    width: 86px;
  }
`,me=i(u)`
  max-width: 110px;
  @media (min-width: 768px) {
    width: 61px;
  }
`,ge=i(u)`
  max-width: 110px;
  @media (min-width: 768px) {
    width: 78px;
  }
`,fe=i.svg`
  width: 20px;
  height: 20px;
  stroke: var(--green-light);
  margin-top: 10px;
  cursor: pointer;
`,ue=i.button`
  display: flex;
  align-items: center;
  padding: 0;
  margin-top: 40px;
`,je=i.svg`
  width: 16px;
  height: 16px;
  stroke: var(--green-light);
`,ye=i.span`
  color: var(--green-light);
  cursor: pointer;
`,we=i.div`
  display: flex;
  flex-direction: column;
  align-items: center;

  @media (min-width: 768px) {
    display: flex;
    flex-direction: row-reverse;
    align-items: flex-end;
    margin-top: 70px;
  }
`,be=i.button`
  background-color: var(--green-light);
  border-radius: 12px;
  width: 100%;
  padding: 8px 0;
  margin-top: 40px;
  color: var(--black-secondary);

  @media (min-width: 768px) {
    width: 212px;
  }
`,ke=i.button`
  color: var(--grey-light);
  padding: 8px 0;
  margin-top: 10px;

  @media (min-width: 768px) {
    width: 212px;
  }
`,ve=i.div`
  margin-left: 16px;
`,Me=i.div`
  display: flex;
`,Fe=i.h4`
  font-size: 14px;
  font-weight: 400;
`,Ce=i.button`
  display: flex;
  margin-left: auto;
  cursor: pointer;
  padding: 0;
`,Be=i.svg`
  width: 16px;
  height: 16px;
  stroke: var(--grey-light);
`,Ie=i.p`
  font-size: 14px;
  color: var(--grey-light);
  margin-left: 6px;
`,Le=i.div`
  display: flex;
  justify-content: space-around;
  gap: 12px;
  margin-top: 6px;

  /* @media (min-width: 768px) {
    display: flex;
    justify-content: flex-end;
    gap: 30px;
    margin-right: 80px;
  } */
`,w=i.p`
  font-size: 12px;
  color: var(--grey-light);
`,C={Breakfast:P,Lunch:$,Dinner:G,Snack:D},Se=({modalData:r,setModalData:o})=>{const t=k(),{id:d,type:n,name:l="",carbohydrate:c="",protein:h="",fat:p="",calories:j=""}=r,y=g.useCallback(async a=>{try{d?await t(A({id:d,body:{...a,diary:n}})):await t(R({...a,diary:n})),o(!1)}catch(s){console.log("ERR",s)}},[t,d,n]),x=async()=>{await t(W({id:d,diary:n})),o(!1)};return e.jsx(Q,{modalActive:!!r,setModalActive:o,children:e.jsxs(se,{children:[e.jsx(oe,{children:"Record your meal"}),e.jsxs(M,{children:[e.jsx(v,{src:C[n],alt:"breakfast"}),e.jsx(F,{children:n})]}),e.jsx(N,{initialValues:{name:l,carbohydrate:c,protein:h,fat:p,calories:j},validationSchema:V,onSubmit:y,children:({errors:a,touched:s,isSubmitting:B,isValid:I,dirty:L,submitForm:b})=>e.jsxs(de,{as:"div",children:[e.jsxs(ce,{children:[e.jsx(pe,{children:e.jsx(m,{type:"text",name:"name",placeholder:"The name of the product or dish",autoComplete:"off",className:s.name?a.name?"input-error":"input-success":"input-normal"})}),e.jsx(xe,{children:e.jsx(m,{type:"number",name:"carbohydrate",placeholder:"Carbonoh.",autoComplete:"off",className:s.carbohydrate?a.carbohydrate?"input-error":"input-success":"input-normal"})}),e.jsx(he,{children:e.jsx(m,{type:"number",name:"protein",placeholder:"Protein",autoComplete:"off",className:s.protein?a.protein?"input-error":"input-success":"input-normal"})}),e.jsxs(le,{children:[e.jsx(me,{children:e.jsx(m,{type:"number",name:"fat",placeholder:"Fat",autoComplete:"off",className:s.fat?a.fat?"input-error":"input-success":"input-normal"})}),e.jsx(ge,{children:e.jsx(m,{type:"number",name:"calories",placeholder:"Calories",autoComplete:"off",className:s.calories?a.calories?"input-error":"input-success":"input-normal"})}),r!=null&&r.id?e.jsx(fe,{onClick:x,children:e.jsx("use",{href:`${f}#trash`})}):null]})]}),e.jsxs(ue,{onClick:async()=>{await b(),o({type:n})},children:[e.jsx(je,{children:e.jsx("use",{href:`${f}#add`})}),e.jsx(ye,{children:"Add more"})]}),e.jsxs(we,{children:[e.jsx(be,{disabled:!I||B||!L||!s,onClick:async()=>{await b()},children:"Confirm"}),e.jsx(ke,{type:"button",onClick:()=>o(!1),children:"Cancel"})]})]})})]})})};function Ae({data:r,type:o,setModalData:t}){return e.jsx(e.Fragment,{children:e.jsxs(ve,{children:[e.jsxs(Me,{children:[e.jsx(Fe,{children:r.name}),e.jsxs(Ce,{onClick:()=>t({type:o,...r}),children:[e.jsx(Be,{children:e.jsx("use",{href:`${f}#edit`})}),e.jsx(Ie,{children:"Edit"})]})]}),e.jsxs(Le,{children:[e.jsxs(w,{children:["Carb. ",r.carbohydrate]}),e.jsxs(w,{children:["Prot. ",r.protein]}),e.jsxs(w,{children:["Fat. ",r.fat]})]})]})})}function Re({data:r,type:o}){const[t,d]=g.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:r.map((n,l,c)=>e.jsxs(ie,{children:[e.jsx("p",{children:l+1}),n!=null&&n.id?e.jsx(Ae,{data:n,type:o,modalData:t,setModalData:d}):l===0||c[l-1].id?e.jsxs(ne,{onClick:()=>d({type:o}),children:[e.jsx(ae,{children:e.jsx("use",{href:`${f}#add`})}),e.jsx(re,{children:"Record your meal"})]}):null]},(n==null?void 0:n.id)||l))}),e.jsx(Se,{modalData:t,setModalData:d},t==null?void 0:t.id)]})}function Ee(){var l;const r=k(),o=E(_),t=((l=location==null?void 0:location.state)==null?void 0:l.from)??"/main",d=g.useRef(!1);g.useEffect(()=>{d.current||(r(z()),d.current=!0)},[r]);const n=g.useMemo(()=>{const{breakfast:c,snack:h,lunch:p,dinner:j}=o;return[{type:"Breakfast",data:c},{type:"Lunch",data:p},{type:"Dinner",data:j},{type:"Snack",data:h}].map(({type:y,data:x})=>({type:y,data:x.concat(Array(4).fill({})).slice(0,4),stats:{carbohydrate:x.reduce((a,{carbohydrate:s})=>a+s,0),protein:x.reduce((a,{protein:s})=>a+s,0),fat:x.reduce((a,{fat:s})=>a+s,0)}}))},[o]);return e.jsx(e.Fragment,{children:e.jsxs(q,{children:[e.jsx(H,{children:e.jsxs(J,{as:T,to:t,children:[e.jsx(te,{children:e.jsx("use",{href:`${f}#arrow-back`})}),e.jsx(K,{children:"Diary"})]})}),e.jsx(O,{children:n.map(({type:c,data:h,stats:p})=>e.jsxs(U,{children:[e.jsxs(X,{children:[e.jsxs(M,{children:[e.jsx(v,{src:C[c],alt:"breakfast"}),e.jsx(F,{children:c})]}),e.jsxs(Y,{children:[e.jsxs("li",{children:["Carbonohidrates: ",e.jsx("span",{children:p.carbohydrate})]}),e.jsxs("li",{children:["Protein: ",e.jsx("span",{children:p.protein})]}),e.jsxs("li",{children:["Fat: ",e.jsx("span",{children:p.fat})]})]})]}),e.jsx(Z,{children:e.jsx(Re,{data:h,type:c,stats:p})})]},c))})]})})}export{Ee as default};
