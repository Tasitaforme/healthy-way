import{K as l,o as u,p as m,j as e,F as h,h as d,g as p,_ as c,u as j,i as f,G as S}from"./index-17b07548.js";import{d as F,S as w,e as P}from"./SignInForm.styled-4b442b05.js";import{a as y,B as x,d as b}from"./Components.styled-2d0af848.js";const B=async t=>{try{const{data:s}=await l.put("/api/auth/change-password",t);return s}catch(s){return s.response.data}};function D(){const{email:t}=u(m),s={password:"",newPassword:""},i=async(r,a)=>{try{await B({email:t,...r}),c.success("Your password has been successfully changed!")}catch(o){c.error(`Something went wrong! 
 ${o.message}`)}a.resetForm()};return e.jsxs("section",{style:{paddingTop:"24px",paddingBottom:"24px"},children:[e.jsx(y,{style:{marginBottom:"12px"},children:"Change password"}),e.jsx(h,{initialValues:s,validationSchema:F,onSubmit:i,children:({errors:r,touched:a,isSubmitting:o,isValid:n})=>e.jsxs(w,{children:[e.jsx(d,{type:"password",name:"password",placeholder:"Password",autoComplete:"off",className:a.quantity?r.quantity?"input-error":"input-success":"input-normal"}),e.jsx(p,{component:"p",name:"password"}),e.jsx(d,{type:"password",name:"newPassword",placeholder:"New password",autoComplete:"off",className:a.quantity?r.quantity?"input-error":"input-success":"input-normal"}),e.jsx(p,{component:"p",name:"newPassword"}),e.jsx(x,{type:"submit",disabled:!n||o,children:"Update Password"})]})})]})}const v=async t=>{try{const{data:s}=await l.delete("/api/auth/delete",{data:t});return s}catch(s){return s.response.data}};function N(){const t=j(),s=f(),{email:i}=u(m),r=async(a,o)=>{try{await v({email:i,...a}),t(S()).unwrap(),c.success("You have successfully deleted your account!"),s("/welcome")}catch(n){console.log(n),c.error(`Something went wrong! 
 ${n.message}`)}o.resetForm()};return e.jsxs("section",{style:{paddingTop:"24px",paddingBottom:"24px"},children:[e.jsx(y,{style:{marginBottom:"12px",color:"var(--error-color)"},children:"Delete account"}),e.jsx(b,{style:{marginBottom:"12px",maxWidth:"380px"},children:"Once you delete your account, there is no going back. Please be certain."}),e.jsx(h,{initialValues:{password:""},validationSchema:P,onSubmit:r,children:({errors:a,touched:o,isSubmitting:n,isValid:g})=>e.jsxs(w,{children:[e.jsx(d,{type:"password",name:"password",placeholder:"Password",autoComplete:"off",className:o.quantity?a.quantity?"input-error":"input-success":"input-normal"}),e.jsx(p,{component:"p",name:"password"}),e.jsx(x,{type:"submit",disabled:!g||n,children:"Delete your account"})]})})]})}export{D as C,N as D};
