import{s as i,a as q,d as N,e as R,f as j,u as k,r as u,N as A,O as W,j as e,F as E,b as m,p as g,P,m as z,x as T,L as $}from"./index-32654d1b.js";import{b as G,l as D,d as O,a as V,M as _,c as H}from"./snack@2x-d5202822.js";const J=i.section`
  padding: 16px 10px 40px;

  @media (min-width: 768px) {
    padding: 24px 27px 40px;
  }
`,K=i.div`
  display: flex;
  align-items: flex-end;
  gap: 4px;
  margin-bottom: 16px;
`,Q=i.span`
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 0;
`;i.svg`
  width: 16px;
  height: 16px;

  @media (min-width: 768px) {
    width: 24px;
    height: 24px;
  }
`;const U=i.h1`
  color: #fff;
  font-size: 24px;
  font-weight: 500;

  @media (min-width: 768px) {
    font-size: 30px;
  }
`,X=i.ul`
  @media (min-width: 1200px) {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
  }
`,Y=i.li`
  @media (min-width: 1200px) {
    width: calc((100% - 1 * 20px) / 2);
    margin-bottom: 0;
  }
`,F=i.img`
  width: 32px;
  height: 32px;
`,M=i.div`
  display: flex;
  align-items: center;
  gap: 12px;
`,Z=i.div`
  @media (min-width: 768px) {
    display: flex;
    justify-content: space-between;
  }
`,C=i.h2`
  font-size: 18px;
  font-weight: 400;

  @media (min-width: 768px) {
    font-size: 22px;
  }
`,ee=i.ul`
  display: flex;
  gap: 20px;
  margin: 12px 0;
  @media (min-width: 768px) {
    margin-right: 74px;
  }
  @media (min-width: 1200px) {
    margin-right: 40px;
  }
`;i.li``;const ie=i.div``,te=i.ul`
  background-color: var(--black-secondary);
  border-radius: 12px;
  padding: 16px 12px;
  margin-bottom: 24px;

  @media (min-width: 1200px) {
    margin-bottom: 0;
  }
`,re=i.li`
  display: flex;

  &:not(:last-child) {
    margin-bottom: 30px;
  }
`,ne=i.button`
  display: flex;
  align-items: center;
  margin-left: 16px;
`;i.svg`
  margin-right: 6px;
`;const ae=i.span`
  color: var(--green-light);
  cursor: pointer;
`,se=i.svg`
  width: 16px;
  height: 16px;
  stroke: var(--grey-light);

  @media (min-width: 768px) {
    width: 22px;
    height: 22px;
  }
`,oe=i.svg`
  width: 16px;
  height: 16px;
  stroke: var(--green-light);
`,de=i.div`
  width: 300px;
  height: 546px;
  background-color: var(--black-secondar);
  padding: 16px 12px;

  @media (min-width: 768px) {
    width: 708px;
    height: 408px;
    padding: 24px;
  }
`,le=i.h3`
  font-size: 24px;
  font-weight: 500;
  margin-bottom: 24px;
`,ce=i(q)``,pe=i.div`
  margin-top: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;

  @media (min-width: 768px) {
    display: flex;
    flex-direction: row;
    gap: 16px;
  }
`,xe=i.div`
  display: flex;
  gap: 16px;
`,f=i.div`
  display: flex;
  flex-direction: column;
`,he=i(f)`
  @media (min-width: 768px) {
    width: 250px;
  }
`,me=i(f)`
  @media (min-width: 768px) {
    width: 100px;
  }
`,ue=i(f)`
  @media (min-width: 768px) {
    width: 86px;
  }
`,ge=i(f)`
  max-width: 110px;
  @media (min-width: 768px) {
    width: 61px;
  }
`,fe=i(f)`
  max-width: 110px;
  @media (min-width: 768px) {
    width: 78px;
  }
`,je=i.svg`
  width: 20px;
  height: 20px;
  stroke: var(--green-light);
  margin-top: 10px;
  cursor: pointer;
`,be=i.button`
  display: flex;
  align-items: center;
  padding: 0;
  margin-top: 40px;
`,ye=i.svg`
  width: 16px;
  height: 16px;
  stroke: var(--green-light);
`,we=i.span`
  color: var(--green-light);
  cursor: pointer;
`,ve=i.div`
  display: flex;
  flex-direction: column;
  align-items: center;

  @media (min-width: 768px) {
    display: flex;
    flex-direction: row-reverse;
    align-items: flex-end;
    margin-top: 70px;
  }
`,ke=i.button`
  background-color: var(--green-light);
  border-radius: 12px;
  width: 100%;
  padding: 8px 0;
  margin-top: 40px;
  color: var(--black-secondary);

  @media (min-width: 768px) {
    width: 212px;
  }
`,Fe=i.button`
  color: var(--grey-light);
  padding: 8px 0;
  margin-top: 10px;

  @media (min-width: 768px) {
    width: 212px;
  }
`,Me=i.div`
  margin-left: 16px;
`,Ce=i.div`
  display: flex;
`,Be=i.h4`
  font-size: 14px;
  font-weight: 400;
`,Ie=i.button`
  display: flex;
  margin-left: auto;
  cursor: pointer;
  padding: 0;
`,Le=i.svg`
  width: 16px;
  height: 16px;
  stroke: var(--grey-light);
`,Se=i.p`
  font-size: 14px;
  color: var(--grey-light);
  margin-left: 6px;
`,qe=i.div`
  display: flex;
  justify-content: space-around;
  gap: 12px;
  margin-top: 6px;

  /* @media (min-width: 768px) {
    display: flex;
    justify-content: flex-end;
    gap: 30px;
    margin-right: 80px;
  } */
`,w=i.p`
  font-size: 12px;
  color: var(--grey-light);
`,B={Breakfast:G,Lunch:D,Dinner:O,Snack:V},Ne=N().shape({name:R().required(),carbohydrate:j().required().positive("Carbonohidrates must be a positive number").min(1,"Carbonohidrates must be greater than or equal to 100").max(6e3,"Carbonohidrates must be lower than or equal to 2000"),protein:j().required().positive("Protein must be a positive number").min(1,"Protein must be greater than or equal to 100").max(6e3,"Protein must be lower than or equal to 2000"),fat:j().required().positive("Fat must be a positive number").min(1,"Fat must be greater than or equal to 100").max(6e3,"Fat must be lower than or equal to 2000"),calories:j().required().positive("Fat must be a positive number").min(1,"Fat must be greater than or equal to 100").max(6e3,"Fat must be lower than or equal to 2000")}),Re=({modalData:r,setModalData:o})=>{const n=k(),{id:d,type:t,name:c="",carbohydrate:l="",protein:h="",fat:p="",calories:b=""}=r,y=u.useCallback(async a=>{try{d?await n(A({id:d,body:{...a,diary:t}})):await n(W({...a,diary:t})),o(!1)}catch(s){console.log("ERR",s)}},[n,d,t]),x=async()=>{await n(P({id:d,diary:t})),o(!1)};return e.jsx(_,{modalActive:!!r,setModalActive:o,children:e.jsxs(de,{children:[e.jsx(le,{children:"Record your meal"}),e.jsxs(M,{children:[e.jsx(F,{src:B[t],alt:"breakfast"}),e.jsx(C,{children:t})]}),e.jsx(E,{initialValues:{name:c,carbohydrate:l,protein:h,fat:p,calories:b},validationSchema:Ne,onSubmit:y,children:({errors:a,touched:s,isSubmitting:I,isValid:L,dirty:S,submitForm:v})=>e.jsxs(ce,{as:"div",children:[e.jsxs(pe,{children:[e.jsx(he,{children:e.jsx(m,{type:"text",name:"name",placeholder:"The name of the product or dish",autoComplete:"off",className:s.name?a.name?"input-error":"input-success":"input-normal"})}),e.jsx(me,{children:e.jsx(m,{type:"number",name:"carbohydrate",placeholder:"Carbonoh.",autoComplete:"off",className:s.carbohydrate?a.carbohydrate?"input-error":"input-success":"input-normal"})}),e.jsx(ue,{children:e.jsx(m,{type:"number",name:"protein",placeholder:"Protein",autoComplete:"off",className:s.protein?a.protein?"input-error":"input-success":"input-normal"})}),e.jsxs(xe,{children:[e.jsx(ge,{children:e.jsx(m,{type:"number",name:"fat",placeholder:"Fat",autoComplete:"off",className:s.fat?a.fat?"input-error":"input-success":"input-normal"})}),e.jsx(fe,{children:e.jsx(m,{type:"number",name:"calories",placeholder:"Calories",autoComplete:"off",className:s.calories?a.calories?"input-error":"input-success":"input-normal"})}),r!=null&&r.id?e.jsx(je,{onClick:x,children:e.jsx("use",{href:`${g}#trash`})}):null]})]}),e.jsxs(be,{onClick:async()=>{await v(),o({type:t})},children:[e.jsx(ye,{children:e.jsx("use",{href:`${g}#add`})}),e.jsx(we,{children:"Add more"})]}),e.jsxs(ve,{children:[e.jsx(ke,{disabled:!L||I||!S||!s,onClick:async()=>{await v()},children:"Confirm"}),e.jsx(Fe,{type:"button",onClick:()=>o(!1),children:"Cancel"})]})]})})]})})};function Ae({data:r,type:o,setModalData:n}){return e.jsx(e.Fragment,{children:e.jsxs(Me,{children:[e.jsxs(Ce,{children:[e.jsx(Be,{children:r.name}),e.jsxs(Ie,{onClick:()=>n({type:o,...r}),children:[e.jsx(Le,{children:e.jsx("use",{href:`${g}#edit`})}),e.jsx(Se,{children:"Edit"})]})]}),e.jsxs(qe,{children:[e.jsxs(w,{children:["Carb. ",r.carbohydrate]}),e.jsxs(w,{children:["Prot. ",r.protein]}),e.jsxs(w,{children:["Fat. ",r.fat]})]})]})})}function We({data:r,type:o}){const[n,d]=u.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(te,{children:r.map((t,c,l)=>e.jsxs(re,{children:[e.jsx("p",{children:c+1}),t!=null&&t.id?e.jsx(Ae,{data:t,type:o,modalData:n,setModalData:d}):c===0||l[c-1].id?e.jsxs(ne,{onClick:()=>d({type:o}),children:[e.jsx(oe,{children:e.jsx("use",{href:`${g}#add`})}),e.jsx(ae,{children:"Record your meal"})]}):null]},(t==null?void 0:t.id)||c))}),e.jsx(Re,{modalData:n,setModalData:d},n==null?void 0:n.id)]})}function ze(){var c;const r=k(),o=z(H),n=((c=location==null?void 0:location.state)==null?void 0:c.from)??"/main",d=u.useRef(!1);u.useEffect(()=>{d.current||(r(T()),d.current=!0)},[r]);const t=u.useMemo(()=>{const{breakfast:l,snack:h,lunch:p,dinner:b}=o;return[{type:"Breakfast",data:l},{type:"Lunch",data:p},{type:"Dinner",data:b},{type:"Snack",data:h}].map(({type:y,data:x})=>({type:y,data:x.concat(Array(4).fill({})).slice(0,4),stats:{carbohydrate:x.reduce((a,{carbohydrate:s})=>a+s,0),protein:x.reduce((a,{protein:s})=>a+s,0),fat:x.reduce((a,{fat:s})=>a+s,0)}}))},[o]);return e.jsx(e.Fragment,{children:e.jsxs(J,{children:[e.jsx(K,{children:e.jsxs(Q,{as:$,to:n,children:[e.jsx(se,{children:e.jsx("use",{href:`${g}#arrow-back`})}),e.jsx(U,{children:"Diary"})]})}),e.jsx(X,{children:t.map(({type:l,data:h,stats:p})=>e.jsxs(Y,{children:[e.jsxs(Z,{children:[e.jsxs(M,{children:[e.jsx(F,{src:B[l],alt:"breakfast"}),e.jsx(C,{children:l})]}),e.jsxs(ee,{children:[e.jsxs("li",{children:["Carbonohidrates: ",e.jsx("span",{children:p.carbohydrate})]}),e.jsxs("li",{children:["Protein: ",e.jsx("span",{children:p.protein})]}),e.jsxs("li",{children:["Fat: ",e.jsx("span",{children:p.fat})]})]})]}),e.jsx(ie,{children:e.jsx(We,{data:h,type:l,stats:p})})]},l))})]})})}export{ze as default};
