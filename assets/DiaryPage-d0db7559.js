import{s as i,e as S,u as k,r as g,Q as A,y as N,j as e,F as R,h as m,a as f,A as E,o as W,E as z,L as T}from"./index-006ed0f9.js";import{b as $,l as P,a as G,c as D,M as Q,d as V,e as _}from"./formikDiary-6400254d.js";const q=i.section`
  padding: 16px 10px 40px;

  @media (min-width: 768px) {
    padding: 24px 27px 40px;
  }
`,H=i.div`
  display: flex;
  align-items: flex-end;
  gap: 4px;
  margin-bottom: 16px;
`,J=i.span`
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 0;
`;i.svg`
  width: 16px;
  height: 16px;

  @media (min-width: 768px) {
    width: 24px;
    height: 24px;
  }
`;const K=i.h1`
  color: #fff;
  font-size: 24px;
  font-weight: 500;

  @media (min-width: 768px) {
    font-size: 30px;
  }
`,O=i.ul`
  @media (min-width: 1200px) {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
  }
`,U=i.li`
  @media (min-width: 1200px) {
    width: calc((100% - 1 * 20px) / 2);
    margin-bottom: 0;
  }
`,v=i.img`
  width: 32px;
  height: 32px;
`,F=i.div`
  display: flex;
  align-items: center;
  gap: 12px;
`,X=i.div`
  @media (min-width: 768px) {
    display: flex;
    justify-content: space-between;
  }
`,M=i.h2`
  font-size: 18px;
  font-weight: 400;

  @media (min-width: 768px) {
    font-size: 22px;
  }
`,Y=i.ul`
  display: flex;
  gap: 20px;
  margin: 12px 0;
  @media (min-width: 768px) {
    margin-right: 74px;
  }
  @media (min-width: 1200px) {
    margin-right: 40px;
  }
`;i.li``;const Z=i.div``,ee=i.ul`
  background-color: var(--black-secondary);
  border-radius: 12px;
  padding: 16px 12px;
  margin-bottom: 24px;

  @media (min-width: 768px) {
    padding: 32px 14px;
  }

  @media (min-width: 1200px) {
    margin-bottom: 0;
  }
`,ie=i.li`
  position: relative;
  display: flex;
  width: 100%;
  height: 44px;
  flex-wrap: wrap;
  &:not(:last-child) {
    margin-bottom: 30px;
  }

  &:before {
    content: '${({itemNumber:n})=>n}';
    width: 16px;
    position: absolute;
    left: 0;
  }

  padding-left: 32px;
  padding-right: 62px;

  @media screen and (min-width(768px)) {
    height: 22px;
  }
`,ne=i.button`
  display: flex;
  margin-top: 3px;
  padding: 0;
  border: none;
  outline: none;
`;i.svg`
  margin-right: 6px;
`;const te=i.span`
  color: var(--green-light);
  cursor: pointer;
`,re=i.svg`
  width: 16px;
  height: 16px;
  stroke: var(--grey-light);

  @media (min-width: 768px) {
    width: 22px;
    height: 22px;
  }
`,ae=i.svg`
  width: 16px;
  height: 16px;
  stroke: var(--green-light);
`,se=i.div`
  width: 300px;
  height: 546px;
  background-color: var(--black-secondar);
  padding: 16px 12px;

  @media (min-width: 768px) {
    width: 708px;
    height: 408px;
    padding: 24px;
  }
`,oe=i.h3`
  font-size: 24px;
  font-weight: 500;
  margin-bottom: 24px;
`,de=i(S)``,pe=i.div`
  margin-top: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;

  @media (min-width: 768px) {
    display: flex;
    flex-direction: row;
    gap: 16px;
  }
`,le=i.div`
  display: flex;
  gap: 16px;
`,u=i.div`
  display: flex;
  flex-direction: column;
`,ce=i(u)`
  @media (min-width: 768px) {
    width: 250px;
  }
`,xe=i(u)`
  @media (min-width: 768px) {
    width: 100px;
  }
`,he=i(u)`
  @media (min-width: 768px) {
    width: 86px;
  }
`,me=i(u)`
  max-width: 110px;
  @media (min-width: 768px) {
    width: 61px;
  }
`,ge=i(u)`
  max-width: 110px;
  @media (min-width: 768px) {
    width: 78px;
  }
`,fe=i.svg`
  width: 20px;
  height: 20px;
  stroke: var(--green-light);
  margin-top: 10px;
  cursor: pointer;
`,ue=i.button`
  display: flex;
  align-items: center;
  padding: 0;
  margin-top: 40px;
`,je=i.svg`
  width: 16px;
  height: 16px;
  stroke: var(--green-light);
`,we=i.span`
  color: var(--green-light);
  cursor: pointer;
`,ye=i.div`
  display: flex;
  flex-direction: column;
  align-items: center;

  @media (min-width: 768px) {
    display: flex;
    flex-direction: row-reverse;
    align-items: flex-end;
    margin-top: 70px;
  }
`,be=i.button`
  background-color: var(--green-light);
  border-radius: 12px;
  width: 100%;
  padding: 8px 0;
  margin-top: 40px;
  color: var(--black-secondary);

  @media (min-width: 768px) {
    width: 212px;
  }
`,ke=i.button`
  color: var(--grey-light);
  padding: 8px 0;
  margin-top: 10px;

  @media (min-width: 768px) {
    width: 212px;
  }
`;i.div`
  display: flex;
  width: 100%;
`;const ve=i.h4`
  font-size: 14px;
  font-weight: 400;
`,Fe=i.button`
  position: absolute;
  top: 0;
  right: 0;
  display: flex;
  margin-left: auto;
  cursor: pointer;
  padding: 0;
`,Me=i.svg`
  width: 16px;
  height: 16px;
  stroke: var(--grey-light);
`,Ce=i.p`
  font-size: 14px;
  color: var(--grey-light);
  margin-left: 6px;
`;i.div`
  @media (min-width: 768px) {
    display: flex;
    flex-direction: row-reverse;
    margin-left: auto;
    gap: 30px;
  }
`;const Be=i.div`
  display: flex;
  justify-content: flex-start;
  gap: 12px;
  margin-top: 6px;
  width: 100%;

  @media (min-width: 768px) {
    margin-top: 0;
    width: fit-content;
    margin-left: auto;
    gap: 40px;
  }
`,y=i.p`
  font-size: 12px;
  color: var(--grey-light);
  & > span {
    color: #fff;
  }
`,C={Breakfast:$,Lunch:P,Dinner:G,Snack:D},Ie=({modalData:n,setModalData:o})=>{const r=k(),{id:d,type:t,name:l="",carbohydrate:p="",protein:h="",fat:c="",calories:j=""}=n,w=g.useCallback(async a=>{try{d?await r(A({id:d,body:{...a,diary:t}})):await r(N({...a,diary:t})),o(!1)}catch(s){console.log("ERR",s)}},[r,d,t]),x=async()=>{await r(E({id:d,diary:t})),o(!1)};return e.jsx(Q,{modalActive:!!n,setModalActive:o,children:e.jsxs(se,{children:[e.jsx(oe,{children:"Record your meal"}),e.jsxs(F,{children:[e.jsx(v,{src:C[t],alt:"breakfast"}),e.jsx(M,{children:t})]}),e.jsx(R,{initialValues:{name:l,carbohydrate:p,protein:h,fat:c,calories:j},validationSchema:V,onSubmit:w,children:({errors:a,touched:s,isSubmitting:B,isValid:I,dirty:L,submitForm:b})=>e.jsxs(de,{as:"div",children:[e.jsxs(pe,{children:[e.jsx(ce,{children:e.jsx(m,{type:"text",name:"name",placeholder:"The name of the product or dish",autoComplete:"off",className:s.name?a.name?"input-error":"input-success":"input-normal"})}),e.jsx(xe,{children:e.jsx(m,{type:"number",name:"carbohydrate",placeholder:"Carbonoh.",autoComplete:"off",className:s.carbohydrate?a.carbohydrate?"input-error":"input-success":"input-normal"})}),e.jsx(he,{children:e.jsx(m,{type:"number",name:"protein",placeholder:"Protein",autoComplete:"off",className:s.protein?a.protein?"input-error":"input-success":"input-normal"})}),e.jsxs(le,{children:[e.jsx(me,{children:e.jsx(m,{type:"number",name:"fat",placeholder:"Fat",autoComplete:"off",className:s.fat?a.fat?"input-error":"input-success":"input-normal"})}),e.jsx(ge,{children:e.jsx(m,{type:"number",name:"calories",placeholder:"Calories",autoComplete:"off",className:s.calories?a.calories?"input-error":"input-success":"input-normal"})}),n!=null&&n.id?e.jsx(fe,{onClick:x,children:e.jsx("use",{href:`${f}#trash`})}):null]})]}),e.jsxs(ue,{onClick:async()=>{await b(),o({type:t})},children:[e.jsx(je,{children:e.jsx("use",{href:`${f}#add`})}),e.jsx(we,{children:"Add more"})]}),e.jsxs(ye,{children:[e.jsx(be,{disabled:!I||B||!L||!s,onClick:async()=>{await b()},children:"Confirm"}),e.jsx(ke,{type:"button",onClick:()=>o(!1),children:"Cancel"})]})]})})]})})};function Le({data:n,type:o,setModalData:r}){return e.jsxs(e.Fragment,{children:[e.jsx(ve,{children:n.name}),e.jsxs(Fe,{onClick:()=>r({type:o,...n}),children:[e.jsx(Me,{children:e.jsx("use",{href:`${f}#edit`})}),e.jsx(Ce,{children:"Edit"})]}),e.jsxs(Be,{children:[e.jsxs(y,{children:["Carb. ",e.jsx("span",{children:n.carbohydrate})]}),e.jsxs(y,{children:["Prot. ",e.jsx("span",{children:n.protein})]}),e.jsxs(y,{children:["Fat. ",e.jsx("span",{children:n.fat})]})]})]})}function Se({data:n,type:o}){const[r,d]=g.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:n.map((t,l,p)=>e.jsx(ie,{itemNumber:l+1,children:t!=null&&t.id?e.jsx(Le,{data:t,type:o,modalData:r,setModalData:d}):l===0||p[l-1].id?e.jsxs(ne,{onClick:()=>d({type:o}),children:[e.jsx(ae,{children:e.jsx("use",{href:`${f}#add`})}),e.jsx(te,{children:"Record your meal"})]}):null},(t==null?void 0:t.id)||l))}),e.jsx(Ie,{modalData:r,setModalData:d},r==null?void 0:r.id)]})}function Re(){var l;const n=k(),o=W(_),r=((l=location==null?void 0:location.state)==null?void 0:l.from)??"/main",d=g.useRef(!1);g.useEffect(()=>{d.current||(n(z()),d.current=!0)},[n]);const t=g.useMemo(()=>{const{breakfast:p,snack:h,lunch:c,dinner:j}=o;return[{type:"Breakfast",data:p},{type:"Lunch",data:c},{type:"Dinner",data:j},{type:"Snack",data:h}].map(({type:w,data:x})=>({type:w,data:x.concat(Array(4).fill({})).slice(0,4),stats:{carbohydrate:x.reduce((a,{carbohydrate:s})=>a+s,0),protein:x.reduce((a,{protein:s})=>a+s,0),fat:x.reduce((a,{fat:s})=>a+s,0)}}))},[o]);return e.jsx(e.Fragment,{children:e.jsxs(q,{children:[e.jsx(H,{children:e.jsxs(J,{as:T,to:r,children:[e.jsx(re,{children:e.jsx("use",{href:`${f}#arrow-back`})}),e.jsx(K,{children:"Diary"})]})}),e.jsx(O,{children:t.map(({type:p,data:h,stats:c})=>e.jsxs(U,{children:[e.jsxs(X,{children:[e.jsxs(F,{children:[e.jsx(v,{src:C[p],alt:"breakfast"}),e.jsx(M,{children:p})]}),e.jsxs(Y,{children:[e.jsxs("li",{children:["Carbonohidrates: ",e.jsx("span",{children:c.carbohydrate})]}),e.jsxs("li",{children:["Protein: ",e.jsx("span",{children:c.protein})]}),e.jsxs("li",{children:["Fat: ",e.jsx("span",{children:c.fat})]})]})]}),e.jsx(Z,{children:e.jsx(Se,{data:h,type:p,stats:c})})]},p))})]})})}export{Re as default};
