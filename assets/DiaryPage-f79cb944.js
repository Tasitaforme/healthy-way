import{s as e,I as x,f as A,u as v,r as u,a7 as R,N as W,j as i,F as E,i as g,b as f,P as z,p as T,V as $,L as P}from"./index-e45df4c0.js";import{b as G,l as D,a as V,c as _,M as q,d as H,e as J}from"./formikDiary-6f5f9ac9.js";const K=e.section`
  padding: 16px 10px 40px;

  @media (min-width: 768px) {
    padding: 24px 27px 40px;
  }
`,O=e.div`
  display: flex;
  align-items: flex-end;
  gap: 4px;
  margin-bottom: 16px;
`;e(x)`
  width: 16px;
  height: 16px;

  @media (min-width: 768px) {
    width: 24px;
    height: 24px;
  }
`;const Q=e.span`
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 0;
`,U=e.h1`
  color: #fff;
  font-size: 24px;
  font-weight: 500;

  @media (min-width: 768px) {
    font-size: 30px;
  }
`,X=e.ul`
  @media (min-width: 1200px) {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
  }
`,Y=e.li`
  @media (min-width: 1200px) {
    width: calc((100% - 1 * 20px) / 2);
    margin-bottom: 0;
  }
`,F=e.img`
  width: 32px;
  height: 32px;
`,M=e.div`
  display: flex;
  align-items: center;
  gap: 12px;
`,Z=e.div`
  @media (min-width: 768px) {
    display: flex;
    justify-content: space-between;
  }
`,C=e.h2`
  font-size: 18px;
  font-weight: 400;

  @media (min-width: 768px) {
    font-size: 22px;
  }
`,ii=e.ul`
  display: flex;
  gap: 20px;
  margin: 12px 0;
  @media (min-width: 768px) {
    margin-right: 74px;
  }
  @media (min-width: 1200px) {
    margin-right: 40px;
  }
`;e.li``;const ei=e.div``,ni=e.ul`
  background-color: var(--black-secondary);
  border-radius: 12px;
  padding: 16px 12px;
  margin-bottom: 24px;

  @media (min-width: 768px) {
    padding: 32px 14px;
  }

  @media (min-width: 1200px) {
    margin-bottom: 0;
  }
`,ti=e.li`
  position: relative;
  display: flex;
  width: 100%;
  height: 44px;
  flex-wrap: wrap;
  &:not(:last-child) {
    margin-bottom: 30px;
  }

  &:before {
    content: '${({$itemNumber:n})=>n}';
    width: 16px;
    position: absolute;
    left: 0;
  }

  padding-left: 32px;
  padding-right: 62px;

  @media screen and (min-width(768px)) {
    height: 22px;
  }
`,ri=e.button`
  display: flex;
  margin-top: 3px;
  padding: 0;
  border: none;
  height: 16px;
  text-align: center;
  outline: none;
  border-radius: 12px;
`;e(x)`
  margin-right: 6px;
`;const ai=e.span`
  color: var(--green-light);
  cursor: pointer;
`,si=e(x)`
  width: 16px;
  height: 16px;
  stroke: var(--grey-light);

  @media (min-width: 768px) {
    width: 22px;
    height: 22px;
  }
`,oi=e(x)`
  width: 16px;
  height: 16px;
  stroke: var(--green-light);
`,di=e.div`
  width: 300px;
  height: 546px;
  background-color: var(--black-secondar);
  padding: 16px 12px;

  @media (min-width: 768px) {
    width: 708px;
    height: 408px;
    padding: 24px;
  }
`,pi=e.h3`
  font-size: 24px;
  font-weight: 500;
  margin-bottom: 24px;
`,li=e(A)``,ci=e.div`
  margin-top: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;

  @media (min-width: 768px) {
    display: flex;
    flex-direction: row;
    gap: 16px;
  }
`,xi=e.div`
  display: flex;
  gap: 16px;
`,j=e.div`
  display: flex;
  flex-direction: column;
`,hi=e(j)`
  @media (min-width: 768px) {
    width: 250px;
  }
`,mi=e(j)`
  @media (min-width: 768px) {
    width: 100px;
  }
`,gi=e(j)`
  @media (min-width: 768px) {
    width: 86px;
  }
`,ui=e(j)`
  max-width: 110px;
  @media (min-width: 768px) {
    width: 61px;
  }
`,fi=e(j)`
  max-width: 110px;
  @media (min-width: 768px) {
    width: 78px;
  }
`,ji=e(x)`
  width: 20px;
  height: 20px;
  stroke: var(--green-light);
  margin-top: 10px;
  cursor: pointer;
  transition: var(--transition-dur-and-fun);

  &:hover {
    stroke: #a1bd66;
  }
`,wi=e.button`
  display: flex;
  align-items: center;
  padding: 0;
  height: 16px;
  width: 92px;
  text-align: center;
  margin-top: 40px;
  border-radius: 15px;
`,yi=e(x)`
  width: 16px;
  height: 16px;
  stroke: var(--green-light);
`,bi=e.span`
  color: var(--green-light);
  cursor: pointer;
`,ki=e.div`
  display: flex;
  flex-direction: column;
  align-items: center;

  @media (min-width: 768px) {
    display: flex;
    flex-direction: row-reverse;
    align-items: flex-end;
    margin-top: 70px;
  }
`,vi=e.button`
  background-color: var(--green-light);
  border-radius: 12px;
  width: 100%;
  padding: 8px 0;
  margin-top: 40px;
  color: var(--black-secondary);
  transition: box-shadow var(--transition-dur-and-fun);

  &:hover {
    box-shadow: var(--box-shadow);
  }

  @media (min-width: 768px) {
    width: 212px;
  }
`,Fi=e.button`
  color: var(--grey-light);
  padding: 8px 0;
  margin-top: 10px;
  transition: var(--transition-dur-and-fun);

  &:hover {
    color: #a1bd66;
  }

  @media (min-width: 768px) {
    width: 212px;
  }
`;e.div`
  display: flex;
  width: 100%;
`;const Mi=e.h4`
  font-size: 14px;
  font-weight: 400;
`,I=e(x)`
  width: 16px;
  height: 16px;
  stroke: var(--grey-light);
  transition: stroke var(--transition-dur-and-fun);
`,Ci=e.button`
  position: absolute;
  top: 0;
  right: 0;
  display: flex;
  margin-left: auto;
  border-radius: 15px;
  cursor: pointer;
  padding: 0;
  transition: color var(--transition-dur-and-fun);
  color: var(--grey-light);
  &:hover {
    color: #757575;
    ${I} {
      stroke: #757575;
    }
  }
`,Ii=e.span`
  font-size: 14px;

  margin-left: 6px;
`;e.div`
  @media (min-width: 768px) {
    display: flex;
    flex-direction: row-reverse;
    margin-left: auto;
    gap: 30px;
  }
`;const Bi=e.div`
  display: flex;
  justify-content: flex-start;
  gap: 12px;
  margin-top: 6px;
  width: 100%;

  @media (min-width: 768px) {
    margin-top: 3px;
    width: fit-content;
    margin-left: auto;
    gap: 40px;
  }
`,b=e.p`
  font-size: 12px;
  color: var(--grey-light);
  & > span {
    color: #fff;
  }
`,B={Breakfast:G,Lunch:D,Dinner:V,Snack:_},Li=({modalData:n,setModalData:o})=>{const r=v(),{id:d,type:t,name:l="",carbohydrate:p="",protein:m="",fat:c="",calories:w=""}=n,y=u.useCallback(async a=>{try{d?await r(R({id:d,body:{...a,diary:t}})):await r(W({...a,diary:t})),o(!1)}catch(s){console.log("ERR",s)}},[r,d,t]),h=async()=>{await r(z({id:d,diary:t})),o(!1)};return i.jsx(q,{modalActive:!!n,setModalActive:o,children:i.jsxs(di,{children:[i.jsx(pi,{children:"Record your meal"}),i.jsxs(M,{children:[i.jsx(F,{src:B[t],alt:"breakfast"}),i.jsx(C,{children:t})]}),i.jsx(E,{initialValues:{name:l,carbohydrate:p,protein:m,fat:c,calories:w},validationSchema:H,onSubmit:y,children:({errors:a,touched:s,isSubmitting:L,isValid:S,dirty:N,submitForm:k})=>i.jsxs(li,{as:"div",children:[i.jsxs(ci,{children:[i.jsx(hi,{children:i.jsx(g,{type:"text",name:"name",placeholder:"The name of the product or dish",autoComplete:"off",className:s.name?a.name?"input-error":"input-success":"input-normal"})}),i.jsx(mi,{children:i.jsx(g,{type:"number",name:"carbohydrate",placeholder:"Carbonoh.",autoComplete:"off",className:s.carbohydrate?a.carbohydrate?"input-error":"input-success":"input-normal"})}),i.jsx(gi,{children:i.jsx(g,{type:"number",name:"protein",placeholder:"Protein",autoComplete:"off",className:s.protein?a.protein?"input-error":"input-success":"input-normal"})}),i.jsxs(xi,{children:[i.jsx(ui,{children:i.jsx(g,{type:"number",name:"fat",placeholder:"Fat",autoComplete:"off",className:s.fat?a.fat?"input-error":"input-success":"input-normal"})}),i.jsx(fi,{children:i.jsx(g,{type:"number",name:"calories",placeholder:"Calories",autoComplete:"off",className:s.calories?a.calories?"input-error":"input-success":"input-normal"})}),n!=null&&n.id?i.jsx(ji,{onClick:h,children:i.jsx("use",{href:`${f}#trash`})}):null]})]}),i.jsxs(wi,{onClick:async()=>{await k(),o({type:t})},children:[i.jsx(yi,{children:i.jsx("use",{href:`${f}#add`})}),i.jsx(bi,{children:"Add more"})]}),i.jsxs(ki,{children:[i.jsx(vi,{disabled:!S||L||!N||!s,onClick:async()=>{await k()},children:"Confirm"}),i.jsx(Fi,{type:"button",onClick:()=>o(!1),children:"Cancel"})]})]})})]})})};function Si({data:n,type:o,setModalData:r}){return i.jsxs(i.Fragment,{children:[i.jsx(Mi,{children:n.name}),i.jsxs(Ci,{onClick:()=>r({type:o,...n}),children:[i.jsx(I,{children:i.jsx("use",{href:`${f}#edit`})}),i.jsx(Ii,{children:"Edit"})]}),i.jsxs(Bi,{children:[i.jsxs(b,{children:["Carb. ",i.jsx("span",{children:n.carbohydrate})]}),i.jsxs(b,{children:["Prot. ",i.jsx("span",{children:n.protein})]}),i.jsxs(b,{children:["Fat. ",i.jsx("span",{children:n.fat})]})]})]})}function Ni({data:n,type:o}){const[r,d]=u.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsx(ni,{children:n.map((t,l,p)=>i.jsx(ti,{$itemNumber:l+1,children:t!=null&&t.id?i.jsx(Si,{data:t,type:o,modalData:r,setModalData:d}):l===0||p[l-1].id?i.jsxs(ri,{onClick:()=>d({type:o}),children:[i.jsx(oi,{children:i.jsx("use",{href:`${f}#add`})}),i.jsx(ai,{children:"Record your meal"})]}):null},(t==null?void 0:t.id)||l))}),i.jsx(Li,{modalData:r,setModalData:d},r==null?void 0:r.id)]})}function Wi(){var l;const n=v(),o=T(J),r=((l=location==null?void 0:location.state)==null?void 0:l.from)??"/main",d=u.useRef(!1);u.useEffect(()=>{d.current||(n($()),d.current=!0)},[n]);const t=u.useMemo(()=>{const{breakfast:p,snack:m,lunch:c,dinner:w}=o;return[{type:"Breakfast",data:p},{type:"Lunch",data:c},{type:"Dinner",data:w},{type:"Snack",data:m}].map(({type:y,data:h})=>({type:y,data:h.concat(Array(4).fill({})).slice(0,4),stats:{carbohydrate:h.reduce((a,{carbohydrate:s})=>a+s,0),protein:h.reduce((a,{protein:s})=>a+s,0),fat:h.reduce((a,{fat:s})=>a+s,0)}}))},[o]);return i.jsx(i.Fragment,{children:i.jsxs(K,{children:[i.jsx(O,{children:i.jsxs(Q,{as:P,to:r,children:[i.jsx(si,{children:i.jsx("use",{href:`${f}#arrow-back`})}),i.jsx(U,{children:"Diary"})]})}),i.jsx(X,{children:t.map(({type:p,data:m,stats:c})=>i.jsxs(Y,{children:[i.jsxs(Z,{children:[i.jsxs(M,{children:[i.jsx(F,{src:B[p],alt:"breakfast"}),i.jsx(C,{children:p})]}),i.jsxs(ii,{children:[i.jsxs("li",{children:["Carbonohidrates: ",i.jsx("span",{children:c.carbohydrate})]}),i.jsxs("li",{children:["Protein: ",i.jsx("span",{children:c.protein})]}),i.jsxs("li",{children:["Fat: ",i.jsx("span",{children:c.fat})]})]})]}),i.jsx(ei,{children:i.jsx(Ni,{data:m,type:p,stats:c})})]},p))})]})})}export{Wi as default};
